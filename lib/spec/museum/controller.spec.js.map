{"version":3,"file":"controller.spec.js","sourceRoot":"/","sources":["spec/museum/controller.spec.ts"],"names":[],"mappings":";;;;;AAEA,4DAA+D;AAC/D,uEAAqD;AAErD,QAAQ,CAAC,wBAAwB,EAAE;IAChC,IAAI,eAAe,CAAC;IACpB,SAAS,CAAC;QACR,eAAe,GAAG,OAAO,CAAC,wBAAwB,CAAC;QACnD,OAAO,CAAC,wBAAwB,GAAG,KAAK,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC;QACP,OAAO,CAAC,wBAAwB,GAAG,eAAe,CAAC;IACrD,CAAC,CAAC,CAAC;IACJ,QAAQ,CAAC,6BAA6B,EAAE;QACpC,IAAI,QAA0B,CAAC;QAC/B,IAAI,OAAO,CAAC;QAEZ,MAAM,MAAM,GAAG;YACZ,YAAY,EAAE;gBACX,OAAO,EAAE,MAAM;gBACf,MAAM,EAAE,IAAI;gBACZ,SAAS,EAAE;oBACR,QAAQ,EAAE,aAAa;oBACvB,UAAU,EAAE,KAAK;iBACnB;gBACD,QAAQ,EAAE;oBACP,QAAQ,EAAE,cAAc;oBACxB,UAAU,EAAE,GAAG;iBACjB;gBACD,OAAO,EAAE,KAAK;aAChB;SACH,CAAC;QACF,MAAM,SAAS,GAAG;YACf,WAAW,EAAE,gBAAgB;YAC7B,aAAa,EAAE,qEAAqE;SAEtF,CAAC;QAEF,EAAE,CAAC,gCAAgC,EAAE,KAAK;YAEvC,OAAO,GAAI;gBACR,KAAK,EAAE,EAAE,MAAM,EAAE,aAAa,EAAC;aACjC,CAAC;YAEF,KAAK,CAAC,iBAAa,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;YACrE,MAAM,IAAI,GAAG,MAAM,6BAAgB,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YAC3D,MAAM,CAAC,iBAAa,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,CAAC;YAC7C,kCAAkC;QACrC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,mBAAmB,EAAE,KAAK;YAC1B,OAAO,GAAI;gBACR,KAAK,EAAG,EAAE;aACZ,CAAC;YACF,MAAM,IAAI,GAAG,MAAM,6BAAgB,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YAC3D,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;YACnC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["/* eslint-disable prettier/prettier */\r\nimport * as Express from 'express';\r\nimport { MuseumController } from '../../src/museum/controller';\r\nimport MuseumService from '../../src/museum/service';\r\n\r\ndescribe('MuseumController Class', function () {\r\n   let originalTimeout;\r\n   beforeAll(function () {\r\n     originalTimeout = jasmine.DEFAULT_TIMEOUT_INTERVAL;\r\n     jasmine.DEFAULT_TIMEOUT_INTERVAL = 10000;\r\n   });\r\n \r\n   afterAll(function () {\r\n     jasmine.DEFAULT_TIMEOUT_INTERVAL = originalTimeout;\r\n   });\r\n  describe('MuseumController get method', function () {\r\n      let response: Express.Response;\r\n      let request;\r\n\r\n      const result = {\r\n         \"attendance\": {\r\n            \"month\": \"July\",\r\n            \"year\": 2014,\r\n            \"highest\": {\r\n               \"museum\": \"avila_adobe\",\r\n               \"visitors\": 32378\r\n            },\r\n            \"lowest\": {\r\n               \"museum\": \"hellman_quon\",\r\n               \"visitors\": 120\r\n            },\r\n            \"total\": 60535\r\n         }\r\n      };\r\n      const errorResp = {\r\n         \"errorCode\": \"InvalidRequest\",\r\n         \"description\": \"The request payload is invalid and does not adhere to specification\",\r\n         \r\n      };\r\n\r\n      it('should return success response', async function () {\r\n         \r\n         request  = {\r\n            query: { 'date': 1404198000000}\r\n         };\r\n      \r\n         spyOn(MuseumService, 'get').and.returnValue(Promise.resolve(result));\r\n         const data = await MuseumController.get(request, response);\r\n         expect(MuseumService.get).toHaveBeenCalled();\r\n         //expect(data).toContain('total');\r\n      });\r\n\r\n      it('should give error', async function () {\r\n         request  = {\r\n            query:  {}\r\n         };\r\n         const data = await MuseumController.get(request, response);\r\n         console.log(\"data of error\", data);\r\n         expect(data['status']).toEqual(500);\r\n      });\r\n  });\r\n});\r\n"]}