{"version":3,"file":"controller.js","sourceRoot":"/","sources":["src/museum/controller.ts"],"names":[],"mappings":";;;;;;AACA,2CAA2D;AAC3D,sEAAsE;AACtE,wDAAsC;AACtC,MAAM,GAAG,GAAG,kBAAU,CAAC;AAEvB,MAAa,gBAAgB;IAC3B;;;;;;;;OAQG;IAEI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAoB,EAAE,GAAqB;QACjE,GAAG,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;QAC3C,MAAM,MAAM,GAAG,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;QACzC,IAAI;YACF,GAAG,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;YACrD,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;YAE5B,IAAI,CAAC,IAAI,EAAE;gBACT,MAAM,IAAI,gCAAgB,CACxB,oBAAY,CAAC,cAAc,CAAC,KAAK,EACjC,oBAAY,CAAC,cAAc,CAAC,WAAW,CACxC,CAAC;aACH;YACD,MAAM,OAAO,GAAG,MAAM,iBAAa,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnD,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC1B;QAAC,OAAO,KAAK,EAAE;YACd,GAAG,CAAC,KAAK,CAAC,uBAAuB,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;YAC3D,OAAO,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACxB;IACH,CAAC;CACF;AA/BD,4CA+BC","sourcesContent":["import * as Express from 'express';\r\nimport { LogService, errorCodeMap } from '../common/index';\r\nimport { BadRequestResult } from '../common/interfaces/custom-errors';\r\nimport MuseumService from './service';\r\nconst log = LogService;\r\n\r\nexport class MuseumController {\r\n  /**\r\n   * get Visitors count\r\n   * @static\r\n   * @param {*} req\r\n   * @param {*} res\r\n   * @param {*} next\r\n   * @returns Visitors\r\n   * @memberof MuseumController\r\n   */\r\n\r\n  public static async get(req: Express.Request, res: Express.Response) {\r\n    log.info('Entering MuseumController::get');\r\n    const logRef = log.getRequestLogRef(req);\r\n    try {\r\n      log.info('req.method' + JSON.stringify(req.headers));\r\n      const date = req.query.date;\r\n\r\n      if (!date) {\r\n        throw new BadRequestResult(\r\n          errorCodeMap.InvalidRequest.value,\r\n          errorCodeMap.InvalidRequest.description\r\n        );\r\n      }\r\n      const results = await MuseumService.get(req.query);\r\n      return res.json(results);\r\n    } catch (error) {\r\n      log.error('MuseumController::get' + JSON.stringify(error));\r\n      return res.json(error);\r\n    }\r\n  }\r\n}\r\n"]}